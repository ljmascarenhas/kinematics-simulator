<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kinematics Simulator</title>
</head>
<body>
    
    <h1>Simulador de Cinem√°tica</h1>
    <section id="infoSimulator">
        Deslocamento: <label id="distance"></label> metros<br>
        Tempo: <label id="time"></label> segundos<br><br>
        Velocidade : <input type="number" id="value-velocity">
        <button id="btn-calc">Calcular</button> <br>
        Status: <label id="status"></label> 
    </section>

    <section id="infoTentatives">
        Tentativas: <label id="tentatives"></label>
    </section>

    <canvas id="simulator" width="400" height="100"></canvas>

    <script type="text/javascript">
        
        let numberTentatives;
        let tentatives = document.getElementById("tentatives")
        if(!tentatives.value){
            numberTentatives = 0
            tentatives.innerHTML = numberTentatives
        }

        const round = (num, places) => {
            if (!("" + num).includes("e")) {
                return +(Math.round(num + "e+" + places)  + "e-" + places);
            } else {
                let arr = ("" + num).split("e");
                let sig = ""
                if (+arr[1] + places > 0) {
                    sig = "+";
                }

                return +(Math.round(+arr[0] + "e" + sig + (+arr[1] + places)) + "e-" + places);
            }
        }

        const reload = () => {
            window.location.reload()
        }

       
        window.onload = function pageSimulator(){

            
            randomDistance = Math.round(Math.random() * (1000 - 1) + 1)
            randomTime = Math.round(Math.random() * (100 - 1) + 1)

            document.getElementById("distance").innerHTML = randomDistance
            document.getElementById("time").innerHTML = randomTime

        }


        document.querySelector("#btn-calc").addEventListener('click', function(){
            let valueRealVelocity = round( randomDistance / randomTime , 2);
            let velocity = document.getElementById("value-velocity").value
            let diference = valueRealVelocity - parseFloat(velocity)

            console.log(round(valueRealVelocity,2))
            console.log(parseFloat(velocity))
            console.log(round(diference, 2))

            if (diference < 0.0 || diference > 0.01){
                window.alert("ERRRROOOOOUUUUU \nTente novamente")
                numberTentatives += 1
                tentatives.innerHTML = numberTentatives
                pageSimulator()
            } else {
                document.getElementById("status").innerHTML = "CORRETO"
            }

        })

    </script>

</body>
</html>